
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Step 0:  Ad-hoc Testing</title><meta name="generator" content="MATLAB 8.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2015-10-29"><meta name="DC.source" content="Step_00.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:14px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:2.0em; color:#000077; line-height:150%; font-weight:bold; text-align:center }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.6em; color:#444444; font-weight:bold; font-style:italic; text-align:left; vertical-align:bottom; line-height:200%; border-top:2px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#555555; font-style:italic; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px;} 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Step 0:  Ad-hoc Testing</h1><!--introduction--><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Workshop Motivation</a></li><li><a href="#2">Verification and Validation Tools Used</a></li><li><a href="#3">Workshop Model Description</a></li><li><a href="#4">Ad-Hoc Testing</a></li><li><a href="#5">Catching a "Bug"</a></li><li><a href="#6">What's next?</a></li></ul></div><h2>Workshop Motivation<a name="1"></a></h2><p><img vspace="5" hspace="5" src="Step_00_Motivation.png" alt=""> </p><h2>Verification and Validation Tools Used<a name="2"></a></h2><div><ul><li>Simulink</li></ul></div><h2>Workshop Model Description<a name="3"></a></h2><p>This workshop will walk you through many of the stages of verification, validation and testing of Simulink models. The model we will use in the workshop is a cruise controller that has been designed from functional and safety requirements.  The initial design is a prototype with floating point signals and calibration parameters.  Later we will use a fixed point equivalent model for production coding.  For now let's examine the model to get an understanding of the controller architecture.  In the next section we will run the model to examine its functionality.</p><p>Open the Cruise Control model - <b><a href="matlab:open_system('CruiseControl_RP');">click here</a></b>.</p><p><img vspace="5" hspace="5" src="Step_00_CruiseControl.png" alt=""> </p><h2>Ad-Hoc Testing<a name="4"></a></h2><p>Now we will test the functionality of the controller. To begin testing the cruise controller, we will use a test harness that will allow us to manually change the inputs and observe the behavior of the controls state machine along with the outputs.  This is an initial informal test that can often catch design issues early in the development. The test harness contains controls from the Dashboard library which is part of the base Simulink library.  The Dashboard blocks allow you to easily modify the inputs to your model to exercise its functionality</p><p>Open the Cruise Control Ad-Hoc test harness model - <b><a href="matlab:A0_AdHoc_Dash;">click here</a></b>.</p><p><img vspace="5" hspace="5" src="Step_00_CruiseControl_AdHoc.png" alt=""> </p><h2>Catching a "Bug"<a name="5"></a></h2><p>The Cruise Controller in this example has a rather severe design issue which may reduce or increase the target speed to its limits without a continuous input of the "CoastSetSw" or the "AccelResSw" input.  The bug will reveal itself based on when you release the input buttons.  It may be a little tricky to catch this issue but it is possible with the Ad-hoc test harness.</p><p>One way to catch the bug would be to visually inspect the results as we toggle the inputs to uncover the design issue. What if we could create a model based on some of the key requirements to detect when a requirement was violated during the Ad-Hoc testing?  A MATLAB function block can be used to check the requirements while the model is running.</p><p><img vspace="5" hspace="5" src="Step_00_CruiseControl_TestScriptMATLAB.png" alt=""> </p><p>Open the test harness model with requirements check block - <b><a href="matlab:A1_AdHoc_ReqCheck;">click here</a></b>.</p><p>To help debug the issue we will use a breakpoint on the output assertion signal for the "No Speed Change" check.  Also note the inputs to the block include the controller input and output signals which facilitates checking of the expected outputs based on the input signal events.  Run the model to try to reproduce the issue while using the breakpoint to debug.  The model will pause for the breakpoint once you have reproduced the issue.</p><p><img vspace="5" hspace="5" src="Step_00_CruiseControl_TestBlockMATLAB.png" alt=""> </p><p>The nature of the issue is that it is possible to miss the "hasChanged" event for the increase or decrease speed button.  Above the issue is highlighted for the "AccelResSw" or increase speed button input.  There are two design issues causing this behavior:</p><div><ol><li>The button hold condition "after(incdec/holdrate*10,tick" is being evaluated first, so it is possible to miss the "hasChanged" event</li><li>The "hasChanged" event is overdesigned, meaning what is relevant is the level of "AccelResSw" and not whether the design responds to the "edge".</li></ol></div><p><img vspace="5" hspace="5" src="Step_00_CruiseControl_AdHoc_Issue.png" alt=""> </p><p>A more robust design is shown below that incorporates these improvements where the "hasChanged" logic has been replaced with the level check "!AccelResSw", and the execution order has been reversed.  The "hasChanged" logic for the "CoastSetSw" transition <b>from</b> the "Coast" state also needs to be changed in a similar way.  Run the improved model to check the fix has resolved the issue.</p><p>Open the improved logic and use in the Cruise Control Ad-Hoc test harness model - <b><a href="matlab:set_param('CruiseControl_RP_reqCheck_harness/Test%20Unit','ModelName','CruiseControl_RP_level');open_system('CruiseControl_RP_level');close_system('CruiseControl_RP',0);">click here</a></b>.</p><p><img vspace="5" hspace="5" src="Step_00_CruiseControl_AdHoc_LevelFix.png" alt=""> </p><h2>What's next?<a name="6"></a></h2><p>Ad-hoc testing has shown to be an effective method to find and debug design issues.  But there are several unanswered questions with regard to the completeness of the testing. The purpose of the workshop is to transform our testing from an ad-hoc approach to a structured and formal testing framework for securing the quality, robustness and safety of our cruise controller.</p><p><img vspace="5" hspace="5" src="Step_00_CruiseControl_WhatsNext.png" alt=""> </p><p>Now that we have familiarized ourselves with the workshop model, fixed an issue, let's continue the workshop to learn methods to answer the above questions.</p><div><ol><li>Close all models - <b><a href="matlab:bdclose('all');">click here</a></b></li><li>Go to <b>Step 1: Requirements Traceability</b> - <b><a href="Step_01.html">click here</a></b>.</li></ol></div><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2015b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Step 0:  Ad-hoc Testing
%
%% Workshop Motivation
%
% <<Step_00_Motivation.png>>
%
%% Verification and Validation Tools Used
% 
% * Simulink
%
%% Workshop Model Description
%
% This workshop will walk you through many of the stages of verification,
% validation and testing of Simulink models. The model we will use in the
% workshop is a cruise controller that has been designed from functional and
% safety requirements.  The initial design is a prototype with floating
% point signals and calibration parameters.  Later we will use a fixed
% point equivalent model for production coding.  For now let's examine the model
% to get an understanding of the controller architecture.  In the next section
% we will run the model to examine its functionality.
%
% Open the Cruise Control model - 
% *<matlab:open_system('CruiseControl_RP'); click here>*. 
%
% <<Step_00_CruiseControl.png>>
%
%% Ad-Hoc Testing 
%
% Now we will test the functionality of the controller.
% To begin testing the cruise controller, we will use a test harness that 
% will allow us to manually change the inputs and observe the behavior of 
% the controls state machine along with the outputs.  This is an initial 
% informal test that can often catch design issues early in the development.
% The test harness contains controls from the Dashboard library which is
% part of the base Simulink library.  The Dashboard blocks allow you to
% easily modify the inputs to your model to exercise its functionality
%
% Open the Cruise Control Ad-Hoc test harness model - 
% *<matlab:A0_AdHoc_Dash; click here>*. 
%
% <<Step_00_CruiseControl_AdHoc.png>>
%
%% Catching a "Bug"
%
% The Cruise Controller in this example has a rather severe design issue
% which may reduce or increase the target speed to its limits without a continuous
% input of the "CoastSetSw" or the "AccelResSw" input.  The bug will reveal
% itself based on when you release the input buttons.  It may be a little
% tricky to catch this issue but it is possible with the Ad-hoc test
% harness.
%
% One way to catch the bug would be to visually inspect the results as we
% toggle the inputs to uncover the design issue. What if we could create a
% model based on some of the key requirements to detect when a requirement
% was violated during the Ad-Hoc testing?  A MATLAB function block can be
% used to check the requirements while the
% model is running.  
%
% <<Step_00_CruiseControl_TestScriptMATLAB.png>>
%
% Open the test harness model with requirements check block - 
% *<matlab:A1_AdHoc_ReqCheck; click here>*.   
%
% To help debug the issue we will use a breakpoint on the output assertion
% signal for the "No Speed Change" check.  Also note the inputs to the 
% block include the controller input and output signals which facilitates 
% checking of the expected outputs based on the input signal events.  Run
% the model to try to reproduce the issue while using the breakpoint to
% debug.  The model will pause for the breakpoint once you have reproduced
% the issue.
%
% <<Step_00_CruiseControl_TestBlockMATLAB.png>>
%
% The nature of the issue is that it is possible to miss the "hasChanged"
% event for the increase or decrease speed button.  Above the issue is
% highlighted for the "AccelResSw" or increase speed button input.  There
% are two design issues causing this behavior:
%
% # The button hold condition "after(incdec/holdrate*10,tick" is being 
% evaluated first, so it is possible to miss the "hasChanged" event
% # The "hasChanged" event is overdesigned, meaning what is relevant is the
% level of "AccelResSw" and not whether the design responds to the "edge".
%
% <<Step_00_CruiseControl_AdHoc_Issue.png>>
%
% A more robust design is shown below that incorporates these improvements
% where the "hasChanged" logic has been replaced with the level check "!AccelResSw",
% and the execution order has been reversed.  The "hasChanged" logic for 
% the "CoastSetSw" transition *from* the "Coast" state also needs to be 
% changed in a similar way.  Run the improved model to check the fix has 
% resolved the issue.
%
% Open the improved logic and use in the Cruise Control Ad-Hoc test harness model - 
% *<matlab:set_param('CruiseControl_RP_reqCheck_harness/Test%20Unit','ModelName','CruiseControl_RP_level');open_system('CruiseControl_RP_level');close_system('CruiseControl_RP',0); click here>*. 
%
% <<Step_00_CruiseControl_AdHoc_LevelFix.png>>
%
%% What's next?
%
% Ad-hoc testing has shown to be an effective method to find and debug
% design issues.  But there are several unanswered questions with regard to
% the completeness of the testing. The purpose of the workshop is to 
% transform our testing from an ad-hoc approach to a structured and formal testing 
% framework for securing the quality, robustness and safety of our cruise 
% controller.    
% 
% <<Step_00_CruiseControl_WhatsNext.png>>
%
% Now that we have familiarized ourselves with the workshop model, fixed an
% issue, let's continue the workshop to learn methods to answer the above
% questions.
%
% # Close all models - *<matlab:bdclose('all'); click here>*
% # Go to *Step 1: Requirements Traceability* - *<Step_01.html click
% here>*.
%
##### SOURCE END #####
--></body></html>